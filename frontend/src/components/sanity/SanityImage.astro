---
import getImageProps from "@/sanity/lib/get-image-props";

const {
  class: className,
  image,
  maxWidth = 600,
  loading = "lazy",
  ...rest
} = Astro.props;

if (import.meta.env.DEV && (!image || !image.asset)) {
  console.warn("SanityImage: No image data passed:", image);
}

const { src, srcset, sizes, width, height } = getImageProps({
  image,
  maxWidth,
});
---

<img
  loading={loading}
  fetchpriority={loading === "eager" ? "high" : undefined}
  alt={image?.alt || ""}
  src={src}
  srcset={srcset}
  sizes={sizes}
  width={width}
  height={height}
  class={className}
  {...rest}
/>
