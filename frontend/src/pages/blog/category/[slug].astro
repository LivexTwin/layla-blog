---
//./src/pages/blog/category/[slug].astro
import BlogLayout from '../../../components/BlogLayout.astro';

import { getBlogIndexData } from '../../../utils/getBlogIndexData';
import { getCategorySlugs } from '../../../utils/sanityQueries';
import ClearFilter from '../../../components/ClearFilter.astro';

// This function is called at build time to generate the static paths for each category
export async function getStaticPaths() {
  const categories = await getCategorySlugs();
  return categories.map((category) => ({
    params: { slug: category.slug },
  }));
}

const { slug } = Astro.params;
const { posts, categories } = await getBlogIndexData({ slug });
---

<BlogLayout posts={posts} categories={categories} categorySlug={slug} />
<ClearFilter /> 



